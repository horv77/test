<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>test</title><p id=output1></p><style>body{margin:1em}</style><script>function h(t=null){let e;if(Array.isArray(t)){e=t}else{let n=[];t=t||Math.floor(Math.random()*(100-5+1))+5;for(let e=0;e<t;e++){let e=Math.floor(Date.now()-Math.random()*(1e6-1e3+1))+1e3;let t=Math.random();let l=Math.log(1/Math.pow(t,1/2)-1)*3+30;l=isFinite(l)?Math.floor(l):0;let a=Math.floor(1/Math.pow(Math.random(),.5));n.push([e,l,a])}e=[...n].sort((e,t)=>e[0]-t[0])}globalThis.d=e;return e}function e(e=null,t=3,l=false){let a=Date.now();let n=h(e);let o=(Date.now()-a)/1e3;let r=i(n,{k:t,rename50224545624680942933:l});let s=(Date.now()-a)/1e3-o;console.log(`runtime  gen ${O(o)} sec  opt ${O(s)} sec`);return r}function O(e,a=3){let t=Array.isArray(e);let l=t?e:[e];let n=l.map(t=>{let l;if(t===0){l=0}else{let e=Math.pow(10,a-Math.ceil(Math.log10(Math.abs(t))));l=Math.round(t*e)/e}return isNaN(l)?0:l});return t?n:n[0]}function g(e){let a=0,n=0;[...e].sort((e,t)=>e-t).forEach((e,t)=>{let l=t+1;a+=e*l;n+=l});return n===0?0:a/n}function j(e){return e.length===0?0:e.reduce((e,t)=>e+t,0)/e.length}function N(l){return l.length<2?[]:l.slice(1).map((e,t)=>e-l[t])}function w(r,{cost:i=null,k:c=.5,corr:f=1e12}={}){i=i||Math.min(...r.map(e=>e[1]));let u={};let M={};let s=r.length-1;[...r].sort((e,t)=>e[0]-t[0]).forEach(([e,t,l],a)=>{let n=r[a+1]?r[a+1][0]:e;let o=n-e;if(l>0){if(!u[t])u[t]=[];u[t].push([e,l,o])}M[e]=s;s--});let m=null;let b={};for(let h in u){let e=u[h];let n=0,o=0,r=0,s=0;e.forEach(([e,t,l])=>{let a=1/Math.pow(M[e],c);r+=l*a;o+=t*a;n+=1*a;s+=a});r/=s;o/=s;n/=s;let t=e.length/s;let l=h-i;let a=Math.asinh(l*o*f)*2+Math.asinh(n*f)-Math.asinh(r*f)*2;a=isFinite(a)?a:0;b[h]=[a,t];if(!m||m[1]<a)m=[h,a]}let t={};for(let e in b){t[e]=b[e][0]}return[m?m[0]:null,t]}function i(e,{cost:t=null,k:i=2,max_run:l=1e3,rename50224545624680942933:a=false}){let[n,o]=w(e,{cost:t});if(Object.keys(o).length===0)return null;let r=Math.min(...Object.keys(o).map(Number));let c=Math.max(...Object.keys(o).map(Number));r=t&&r>t?t:r;let s=n+(n-r)/2;c=c<s?s:c;let h=Math.min(...Object.values(o));let f=Math.max(...Object.values(o));let u=j(N(Object.values(o).sort((e,t)=>e-t)));let M=f===h?h-1:h-u;let m={};for(let[e,t]of Object.entries(o)){m[e]=t}m[r]=m[r]||M;m[c]=m[c]||M;let b={};for(let[e,t]of Object.entries(m)){t=(t-M)/(f-M);b[e]=Math.pow(t,Math.exp(i));if(isNaN(b[e]))b[e]=0}if(Object.keys(b).length<=1)return null;let p=null;for(let e=0;e<l;e++){let s=Math.random()*(c-r)+r;let h=null;let t=Object.entries(b).sort((e,t)=>e[0]-t[0]);for(let e=1;e<t.length;e++){let[a,n]=t[e-1];let[o,r]=t[e];if(s>=a&&s<=o){if(a===o){h=(n+r)/2}else{let e=Math.abs(o-a);let t=Math.abs(s-o);let l=Math.abs(a-s);h=(n*t+r*l)/(t+l);h=Math.pow(h,Math.exp(i))}if(isNaN(h))h=0;break}}let e=Math.random()*(1-0)+0;if(e<=h){p=s;break}}if(a){console.log(`SCORE ( price, score ): ${Object.entries(o).map(([e,t])=>[e,O(t)])}`);console.log(`SCORE LIMIT LOW: ${O(g(Object.values(o)))}`);console.log(`PRICE MIN MEAN MAX EXTRA: ${O(r)} ${O(j(Object.keys(o).map(Number)))} ${O(c)}`);let a=0,n=0;for(let[t,l]of Object.entries(o)){let e=1/(Math.pow(t-p,2)+1);a+=l*e;n+=e}let e=a/n;console.log(`RANDOM PRICE AND ITS SCORE: ${O(p)} ${O(e)}`)}return p}console.log(e(1e4,false));</script>