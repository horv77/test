<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>test</title><p id=output1></p><style>body{margin:1em}</style><script>function h(t=null){let e;if(Array.isArray(t)){e=t}else{let a=[];t=t||Math.floor(Math.random()*(100-5+1))+5;for(let e=0;e<t;e++){let e=Math.floor(Date.now()-Math.random()*(1e6-1e3+1))+1e3;let t=Math.random();let l=Math.log(1/Math.pow(t,1/2)-1)*3+30;l=isFinite(l)?Math.floor(l):0;let n=Math.floor(1/Math.pow(Math.random(),.5));a.push([e,l,n])}e=[...a].sort((e,t)=>e[0]-t[0])}globalThis.d=e;return e}function e(e=null,t=3,l=false){let n=Date.now();let a=h(e);let o=(Date.now()-n)/1e3;let r=i(a,{k:t,rename50224545624680942933:l});let s=(Date.now()-n)/1e3-o;document.getElementById("output1").innerText=`runtime  gen ${O(o)} sec  opt ${O(s)} sec`;return r}function O(e,n=3){let t=Array.isArray(e);let l=t?e:[e];let a=l.map(t=>{let l;if(t===0){l=0}else{let e=Math.pow(10,n-Math.ceil(Math.log10(Math.abs(t))));l=Math.round(t*e)/e}return isNaN(l)?0:l});return t?a:a[0]}function g(e){let n=0,a=0;[...e].sort((e,t)=>e-t).forEach((e,t)=>{let l=t+1;n+=e*l;a+=l});return a===0?0:n/a}function j(e){return e.length===0?0:e.reduce((e,t)=>e+t,0)/e.length}function N(l){return l.length<2?[]:l.slice(1).map((e,t)=>e-l[t])}function d(r,{cost:i=null,k:u=.5,corr:c=1e12}={}){i=i||Math.min(...r.map(e=>e[1]));let f={};let M={};let s=r.length-1;[...r].sort((e,t)=>e[0]-t[0]).forEach(([e,t,l],n)=>{let a=r[n+1]?r[n+1][0]:e;let o=a-e;if(l>0){if(!f[t])f[t]=[];f[t].push([e,l,o])}M[e]=s;s--});let m=null;let b={};for(let h in f){let e=f[h];let a=0,o=0,r=0,s=0;e.forEach(([e,t,l])=>{let n=1/Math.pow(M[e],u);r+=l*n;o+=t*n;a+=1*n;s+=n});r/=s;o/=s;a/=s;let t=e.length/s;let l=h-i;let n=Math.asinh(l*o*c)*2+Math.asinh(a*c)-Math.asinh(r*c)*2;n=isFinite(n)?n:0;b[h]=[n,t];if(!m||m[1]<n)m=[h,n]}let t={};for(let e in b){t[e]=b[e][0]}return[m?m[0]:null,t]}function i(e,{cost:t=null,k:i=2,max_run:l=1e3,rename50224545624680942933:n=false}){let[a,o]=d(e,{cost:t});if(Object.keys(o).length===0)return null;let r=Math.min(...Object.keys(o).map(Number));let u=Math.max(...Object.keys(o).map(Number));r=t&&r>t?t:r;let s=a+(a-r)/2;u=u<s?s:u;let h=Math.min(...Object.values(o));let c=Math.max(...Object.values(o));let f=j(N(Object.values(o).sort((e,t)=>e-t)));let M=c===h?h-1:h-f;let m={};for(let[e,t]of Object.entries(o)){m[e]=t}m[r]=m[r]||M;m[u]=m[u]||M;let b={};for(let[e,t]of Object.entries(m)){t=(t-M)/(c-M);b[e]=Math.pow(t,Math.exp(i));if(isNaN(b[e]))b[e]=0}if(Object.keys(b).length<=1)return null;let p=null;for(let e=0;e<l;e++){let s=Math.random()*(u-r)+r;let h=null;let t=Object.entries(b).sort((e,t)=>e[0]-t[0]);for(let e=1;e<t.length;e++){let[n,a]=t[e-1];let[o,r]=t[e];if(s>=n&&s<=o){if(n===o){h=(a+r)/2}else{let e=Math.abs(o-n);let t=Math.abs(s-o);let l=Math.abs(n-s);h=(a*t+r*l)/(t+l);h=Math.pow(h,Math.exp(i))}if(isNaN(h))h=0;break}}let e=Math.random()*(1-0)+0;if(e<=h){p=s;break}}if(n){console.log(`SCORE ( price, score ): ${Object.entries(o).map(([e,t])=>[e,O(t)])}`);console.log(`SCORE LIMIT LOW: ${O(g(Object.values(o)))}`);console.log(`PRICE MIN MEAN MAX EXTRA: ${O(r)} ${O(j(Object.keys(o).map(Number)))} ${O(u)}`);let n=0,a=0;for(let[t,l]of Object.entries(o)){let e=1/(Math.pow(t-p,2)+1);n+=l*e;a+=e}let e=n/a;console.log(`RANDOM PRICE AND ITS SCORE: ${O(p)} ${O(e)}`)}return p}console.log(e(1e4,false));</script>